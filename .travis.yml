language: cpp
sudo: false

env:
  - secure: "ShECEF07AQGdg335F7Ut0QuU4O00QcyGrsRxmTUj9XlEBl5BDTV94w17zIgRODhhdHU10/YARzWBxa5mHxm76tFamuWhd/6gmxpc9tSq9dgim6sjhGzUK87vAZ6n1jTa55mWMEKgEIwM6aW45nPZuUEwnPM8rlvyiSZaNuDs3MjjtcF9DQ2kiojBYY+h1D2VT+QrE08xYkUbUeU7FT6IPdRiRBf4CbLNafynRTwGNU3n8tk42Kne+9+6Vr+I3Y9YM8H4ytqETiBx9lO3TkO8b+hp2KRsIVub0Ht4/Et1EubUJRshrM9tvf5yKo10d++Gxka+Vh8ohWQuR+lXCswSOzRUym0zkWAsKKMzqdJ4rDgSoyNBvTPKgOuqu3NGuCt2Yjp3H//rwmJz5+jlDGyh+vh4rGCCDR4L7eAnlQC11HyIkBJUrwbYbCts0x9AxO9yMelhg8f7a+jzpCP352KLp1k8pR7bxYlE/tLloZ03mVS3FYpZvWywV8STOG2NsS8qR7nlY6xNJK8/ydjV6K94KjJ37uLfzzIW10vr4tHtUei2XbFBX5nsru0m0x+8SGolFFEabT+9kkcUHHjxTGNi0c0QjnpbaNZSkOFUWDnJ8ooYfKjMDhSLh07DPK/e7wUJio/C2CDamrGByWaGPAAbSx3PY3aA7inCcq+gNNC4XpE="

matrix:
  fast_finish: true
  include:  
  - os: linux
    env:
      - TEST="Clang format"
    script:
      - |
        if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then
          mkdir build
          cd build
          cmake -DRINGMESH_WITH_GRAPHICS:BOOL=ON -DRINGMESH_WITH_UTILITIES:BOOL=ON -DRINGMESH_WITH_TESTS:BOOL=ON -DRINGMESH_WITH_TUTORIALS:BOOL=ON ..
          cd ringmesh/Release
          make format
          if [[ -n $(git diff) ]]; then
            echo "Format requirement is not satisfied"
            return 1
          fi
        fi
    after_failure:
      - $TRAVIS_BUILD_DIR/tools/travis-ci-git-commit.bash
  - os: linux
    env:
      - TEST="Gcc Check"
    script:
      - mkdir build
      - cd build
      - CXX=/usr/bin/g++ CC=/usr/bin/gcc cmake -DRINGMESH_WITH_GRAPHICS:BOOL=OFF -DRINGMESH_WITH_UTILITIES:BOOL=ON -DRINGMESH_WITH_TESTS:BOOL=ON -DRINGMESH_WITH_TUTORIALS:BOOL=ON ..
      - cd ringmesh/Debug
      - cmake --build .
      - ctest
      
