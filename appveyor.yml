version: 1.0.{build}

notifications:
  - provider: Slack
    auth_token:
      secure: 9GfC4zyHs0Qh7E0TJnHgiaVs4sv2twBRXUh77i1gEg8=
    channel: '#ringmesh'
    on_build_success: false
    on_build_failure: true
    on_build_status_changed: true

image: Visual Studio 2013

environment:
  password:
    secure: 61164urZVvsMrnw+6P+GBQ==
    
build:
  parallel: true
 
build_script:
 - cmd: >-
    mkdir build
    
    cd build
    
    mkdir ringmesh
    
    cd ringmesh
    
    cmake -DRINGMESH_WITH_GRAPHICS:BOOL=ON -DBUILD_RINGMESH_VIEW:BOOL=ON -DRINGMESH_TEST_GRAPHICS:BOOL=OFF -DRINGMESH_WITH_UTILITIES:BOOL=ON -DRINGMESH_WITH_TESTS:BOOL=ON -DRINGMESH_WITH_TUTORIALS:BOOL=ON ../..
    
    cmake --build . --config Debug
    
test_script:
 - cmd: cmake --build . --target RUN_TESTS --config Debug

on_success:
 - IF "%APPVEYOR_REPO_BRANCH%"=="default" (
     C:\projects\ringmesh\launch_coverage.cmd
   )
